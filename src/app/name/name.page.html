<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Item Edit </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <form [formGroup]="form">
  <ion-list>
    <ion-item>
      <ion-input
        type="number"
        label="ID"
        labelPlacement="stacked"
        [clearInput]="true"
        placeholder="Enter ID (number)"
        formControlName="id"
      >
      </ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form.get('id')?.hasError('required')
        && form.get('id')?.dirty
      ">
      ğŸš¨Id must required!!
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('id')?.hasError('pattern')
        && form.get('id')?.dirty
      ">
      ğŸš¨Id must be a <b>integer</b> bigger than 0
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('id')?.hasError('max')
        && form.get('id')?.dirty
      ">
      ğŸš¨Id can't bigger than <b>999999</b>
    </ion-text>
    <ion-item>
      <ion-input
        label="Name"
        labelPlacement="stacked"
        [clearInput]="true"
        placeholder="Enter Name"
        formControlName="name"
      >
      </ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form.get('name')?.hasError('required')
        && form.get('name')?.dirty
      ">
      ğŸš¨Name must required!!
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('name')?.hasError('maxlength')
        && form.get('name')?.dirty
      ">
      ğŸš¨Name length max 20!!
    </ion-text>
    <ion-item>
      <ion-select placeholder="Select a category" formControlName="category">
        <div slot="label">
          Category
          <ion-text color="danger" *ngIf="form.get('category')?.invalid && form.get('category')?.touched">(Required)</ion-text>
        </div>
        <ion-select-option value="Electronics">Electronics</ion-select-option>
        <ion-select-option value="Furniture">Furniture</ion-select-option>
        <ion-select-option value="Clothing">Clothing</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-input
        label="Quantity"
        labelPlacement="stacked"
        [clearInput]="true"
        type="number"
        placeholder="Enter Quantity (number)"
        formControlName="quantity"
      >
      </ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form.get('quantity')?.hasError('required')
        && form.get('quantity')?.dirty
      ">
      ğŸš¨Quantity number must required!!
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('quantity')?.hasError('max')
        && form.get('quantity')?.dirty
      ">
      ğŸš¨Quantity can't bigger than <b>999999</b>
    </ion-text>
    <ion-text color="danger" *ngIf="form.hasError('quantityZeroCheck')
      ">
      ğŸš¨Quantity must be 0 if stock status is "Out of stock"
    </ion-text>
    <ion-item>
      <ion-input
        label="Price"
        labelPlacement="stacked"
        [clearInput]="true"
        type="number"
        placeholder="Enter Price (number)"
        formControlName="price"
      >
      </ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form.get('price')?.hasError('required')
        && form.get('price')?.dirty
      ">
      ğŸš¨Price must required!!
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('price')?.hasError('pattern')
      ">
      ğŸš¨Your input price is incorrect!
    </ion-text>
    <ion-item>
      <ion-input
        label="Supplier Name"
        labelPlacement="stacked"
        [clearInput]="true"
        placeholder="Enter Supplier Name "
        formControlName="supplierName"
      >
      </ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form.get('supplierName')?.hasError('required')
        && form.get('supplierName')?.dirty
      ">
      ğŸš¨Supplier name must required!!
    </ion-text>
    <ion-text color="danger" *ngIf="form.get('supplierName')?.hasError('maxlength')
        && form.get('supplierName')?.dirty
      ">
      ğŸš¨Supplier name max length: 25
    </ion-text>
    <ion-item>
      <ion-select placeholder="Stock Status" formControlName="stockStatus">
        <div slot="label">
          Stock Status
          <ion-text color="danger" *ngIf="form.get('stockStatus')?.invalid && form.get('stockStatus')?.touched">(Required)</ion-text>
        </div>
        <ion-select-option value="In stock">In Stock</ion-select-option>
        <ion-select-option value="Low stock">Low Stock</ion-select-option>
        <ion-select-option value="Out of stock">Out of Stock</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-text color="danger" *ngIf="form.hasError('quantityZeroCheck')
    ">
      ğŸš¨Stock status must be "Out of stock" if quantity is 0
    </ion-text>
    <ion-item lines="none">
      <ion-label>Featured Item</ion-label>
      <ion-checkbox
        slot="end"
        formControlName="featuredItem"
      ></ion-checkbox>
    </ion-item>

    <ion-item>
      <ion-toggle
        [(ngModel)]="noteToggle"
        [ngModelOptions] = "{standalone: true}"
        [enableOnOffLabels]="true"
        (ionChange)="onNoteToggleChange()"
      >
        Special Note (Optional)
      </ion-toggle>
    </ion-item>
    <ion-item *ngIf="noteToggle">
      <ion-textarea
        autoGrow = "true"
        formControlName="specialNote"
        placeholder="Enter the item special note here"
      >
      </ion-textarea>
      <ion-button
        *ngIf="form.get('specialNote')?.value"
        fill="clear"
        slot="end"
        size="small"
        (click)="form.get('specialNote')?.setValue('')"
        class="clear-button"
      >
        <ion-icon name="close-circle" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>
  </form>
  <ion-button [routerLink]= "['/tabs/tab3']" id="noSave" >Quit</ion-button>
  <ion-button id="Save" (click)="submitForm()">Save Changes</ion-button>
</ion-content>
